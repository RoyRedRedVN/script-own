local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

WindUI:AddTheme({
    Name = "POWER",
    
    Accent = Color3.fromHex("#18181b"),
    Dialog = Color3.fromHex("#161616"),
    Outline = Color3.fromHex("#FFFFFF"),
    Text = Color3.fromHex("#FFFFFF"),
    Placeholder = Color3.fromHex("#7a7a7a"),
    Background = Color3.fromHex("#101010"),
    Button = Color3.fromHex("#52525b"),
    Icon = Color3.fromHex("#a1a1aa")
})

WindUI:SetTheme("POWER")

local Window = WindUI:CreateWindow({
    Title = "Lowet Hub",
    Icon = "door-open",
    Author = "by RedMod",
})

-- Section Main for Home
local SectionMain = Window:Section({
    Title = "Main",
    Icon = "house",
    Opened = true,
})

-- Section Game for gameplay features
local SectionGame = Window:Section({
    Title = "Game",
    Icon = "gamepad-2",
    Opened = true,
})

-- Section Settings for misc
local SectionSettings = Window:Section({
    Title = "Settings",
    Icon = "settings",
    Opened = true,
})

-- Variables
local SelectedSeeds = {}
local SelectedGears = {}
local SelectedSellPlants = {}
local AutoBuySelectSeed = false
local AutoBuyAllSeeds = false
local AutoBuySelectGear = false
local AutoBuyAllGear = false
local AutoFarmEnabled = false
local AutoFarmMoneyEnabled = false

-- Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- TAB HOME (in Main Section)
local TabHome = SectionMain:Tab({
    Title = "Home",
    Icon = "house"
})

TabHome:Paragraph({
    Title = "Welcome to Lowet Hub",
    Desc = "Join our Discord community for updates and support!",
    Locked = false
})

TabHome:Paragraph({
    Title = "Discord Server",
    Desc = "https://discord.gg/VyQfTtDJnY",
    Locked = false,
    Buttons = {
        {
            Icon = "copy",
            Title = "Copy Link",
            Callback = function()
                setclipboard("https://discord.gg/VyQfTtDJnY")
                print("✓ Discord link copied to clipboard!")
            end
        }
    }
})

-- TAB AUTO FARM (in Game Section) - Added first in Game section
local TabAutoFarm = SectionGame:Tab({
    Title = "Auto Farm",
    Icon = "zap"
})

TabAutoFarm:Paragraph({
    Title = "Auto Farm Brainrots",
    Desc = "Automatically farm brainrots with Frost Grenade",
    Locked = false
})

local SelectedRarities = {"Secret", "Limited"}

local RarityDropdown = TabAutoFarm:Dropdown({
    Title = "Select Rarities to Farm",
    Values = {"Rare", "Epic", "Legendary", "Mythic", "Godly", "Secret", "Limited"},
    Value = {"Secret", "Limited"},
    Multi = true,
    AllowNone = true,
    Callback = function(selected)
        SelectedRarities = selected
        if type(selected) == "table" then
            print("Selected Rarities: " .. game:GetService("HttpService"):JSONEncode(selected))
        end
    end
})

TabAutoFarm:Toggle({
    Title = "Enable Auto Farm",
    Description = "Auto teleport, use Frost Grenade, and auto click bats",
    Default = false,
    Callback = function(value)
        AutoFarmEnabled = value
        print("Auto Farm:", value)
    end
})

TabAutoFarm:Toggle({
    Title = "Auto Farm Money With Best Brainrot",
    Description = "Auto equip best brainrots every 10 seconds",
    Default = false,
    Callback = function(value)
        AutoFarmMoneyEnabled = value
        print("Auto Farm Money:", value)
    end
})

-- TAB SEEDS (in Game Section)
local TabSeeds = SectionGame:Tab({
    Title = "Seeds",
    Icon = "sprout"
})

TabSeeds:Paragraph({
    Title = "Seeds Manager",
    Desc = "Buy and manage your seeds",
    Locked = false
})

local SeedsDropdown = TabSeeds:Dropdown({
    Title = "Select Seeds",
    Values = {
        "Cactus",
        "Strawberry",
        "Pumpkin",
        "Dragon Fruit",
        "Eggplant",
        "Watermelon",
        "Cocotank",
        "Grape",
        "Carnivorous Plant",
        "Mr carrot",
        "Shroombino",
        "Tomatrio",
        "Mango"
    },
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(selected)
        SelectedSeeds = selected
        if type(selected) == "table" then
            print("Selected Seeds: " .. game:GetService("HttpService"):JSONEncode(selected))
        end
    end
})

TabSeeds:Toggle({
    Title = "Auto Buy Selected",
    Description = "Auto buy selected seeds",
    Default = false,
    Callback = function(value)
        AutoBuySelectSeed = value
        print("Auto Buy Selected Seeds:", value)
    end
})

TabSeeds:Toggle({
    Title = "Auto Buy All",
    Description = "Auto buy all seeds",
    Default = false,
    Callback = function(value)
        AutoBuyAllSeeds = value
        print("Auto Buy All Seeds:", value)
    end
})

-- TAB GEAR (in Game Section)
local TabGear = SectionGame:Tab({
    Title = "Gear",
    Icon = "wrench"
})

TabGear:Paragraph({
    Title = "Gear Shop",
    Desc = "Buy and equip your gears",
    Locked = false
})

local GearsDropdown = TabGear:Dropdown({
    Title = "Select Gears",
    Values = {
        "Frost Grenade",
        "Frost Blower",
        "Banana Gun",
        "Carrot Launcher",
        "Water Bucket"
    },
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(selected)
        SelectedGears = selected
        if type(selected) == "table" then
            print("Selected Gears: " .. game:GetService("HttpService"):JSONEncode(selected))
        end
    end
})

TabGear:Toggle({
    Title = "Auto Buy Selected",
    Description = "Auto buy selected gears",
    Default = false,
    Callback = function(value)
        AutoBuySelectGear = value
        print("Auto Buy Selected Gears:", value)
    end
})

TabGear:Toggle({
    Title = "Auto Buy All",
    Description = "Auto buy all gears",
    Default = false,
    Callback = function(value)
        AutoBuyAllGear = value
        print("Auto Buy All Gears:", value)
    end
})

-- TAB SELL (in Game Section)
local TabSell = SectionGame:Tab({
    Title = "Sell",
    Icon = "dollar-sign"
})

TabSell:Paragraph({
    Title = "Auto Sell Manager",
    Desc = "Sell items by rarity",
    Locked = false
})

TabSell:Paragraph({
    Title = "Sell Trash Items",
    Desc = "Quick sell items by rarity",
    Locked = false,
    Buttons = {
        {
            Icon = "trash-2",
            Title = "Sell Common",
            Callback = function()
                local success = pcall(function()
                    local args = {"Common"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Common items!")
                else
                    warn("✗ Failed to sell Common items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Epic",
            Callback = function()
                local success = pcall(function()
                    local args = {"Epic"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Epic items!")
                else
                    warn("✗ Failed to sell Epic items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Legendary",
            Callback = function()
                local success = pcall(function()
                    local args = {"Legendary"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Legendary items!")
                else
                    warn("✗ Failed to sell Legendary items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Godly",
            Callback = function()
                local success = pcall(function()
                    local args = {"Godly"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Godly items!")
                else
                    warn("✗ Failed to sell Godly items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Mythic",
            Callback = function()
                local success = pcall(function()
                    local args = {"Mythic"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Mythic items!")
                else
                    warn("✗ Failed to sell Mythic items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Secret",
            Callback = function()
                local success = pcall(function()
                    local args = {"Secret"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Secret items!")
                else
                    warn("✗ Failed to sell Secret items")
                end
            end
        },
        {
            Icon = "trash-2",
            Title = "Sell Limited",
            Callback = function()
                local success = pcall(function()
                    local args = {"Limited"}
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                end)
                if success then
                    print("✓ Sold all Limited items!")
                else
                    warn("✗ Failed to sell Limited items")
                end
            end
        }
    }
})

TabSell:Paragraph({
    Title = "Sell All Trash",
    Desc = "Sell multiple rarities at once",
    Locked = false,
    Buttons = {
        {
            Icon = "trash",
            Title = "Sell All Trash",
            Callback = function()
                local rarities = {"Common", "Epic", "Legendary", "Godly", "Mythic", "Secret", "Limited"}
                local soldCount = 0
                
                for _, rarity in ipairs(rarities) do
                    local success = pcall(function()
                        local args = {rarity}
                        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("AutoSell"):FireServer(unpack(args))
                    end)
                    if success then
                        soldCount = soldCount + 1
                    end
                    task.wait(0.1)
                end
                
                print("✓ Sold " .. soldCount .. " rarity types!")
            end
        }
    }
})

TabSell:Paragraph({
    Title = "Sell Plants",
    Desc = "Auto equip and sell selected plants",
    Locked = false
})

local SellPlantsDropdown = TabSell:Dropdown({
    Title = "Select Plants to Sell",
    Values = {
        "Cactus",
        "Strawberry",
        "Pumpkin",
        "Dragon Fruit",
        "Eggplant",
        "Watermelon",
        "Cocotank",
        "Grape",
        "Carnivorous Plant",
        "Mr carrot",
        "Shroombino",
        "Tomatrio",
        "Mango"
    },
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(selected)
        SelectedSellPlants = selected
        if type(selected) == "table" then
            print("Selected Plants to Sell: " .. game:GetService("HttpService"):JSONEncode(selected))
        end
    end
})

TabSell:Paragraph({
    Title = "Sell Selected Plants",
    Desc = "Auto equip then sell the selected plants",
    Locked = false,
    Buttons = {
        {
            Icon = "hand",
            Title = "Sell Plants",
            Callback = function()
                if type(SelectedSellPlants) == "table" and #SelectedSellPlants > 0 then
                    local soldCount = 0
                    
                    for _, plant in ipairs(SelectedSellPlants) do
                        local success = pcall(function()
                            -- Equip plant first
                            local player = game:GetService("Players").LocalPlayer
                            local character = player.Character
                            if character then
                                local humanoid = character:FindFirstChildOfClass("Humanoid")
                                if humanoid then
                                    -- Find plant in backpack or character
                                    local plantItem = player.Backpack:FindFirstChild(plant) or character:FindFirstChild(plant)
                                    if plantItem then
                                        humanoid:EquipTool(plantItem)
                                        task.wait(0.2) -- Wait for equip
                                        
                                        -- Sell the equipped plant
                                        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ItemSell"):FireServer()
                                        soldCount = soldCount + 1
                                        task.wait(0.2) -- Delay between sells
                                    else
                                        warn("✗ Plant not found: " .. plant)
                                    end
                                end
                            end
                        end)
                        
                        if not success then
                            warn("✗ Failed to sell: " .. plant)
                        end
                    end
                    
                    print("✓ Sold " .. soldCount .. "/" .. #SelectedSellPlants .. " plants!")
                else
                    warn("✗ No plants selected!")
                end
            end
        }
    }
})

-- TAB BRAINROT (in Game Section)
local TabBrainrot = SectionGame:Tab({
    Title = "Brainrot",
    Icon = "skull"
})

TabBrainrot:Paragraph({
    Title = "Brainrot Manager",
    Desc = "Equip the best brainrots in your inventory",
    Locked = false,
    Buttons = {
        {
            Icon = "zap",
            Title = "Equip Best",
            Callback = function() 
                local success, err = pcall(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("EquipBestBrainrots"):FireServer()
                end)
                if success then
                    print("✓ Equipped best brainrots!")
                else
                    warn("✗ Failed to equip brainrots:", err)
                end
            end
        }
    }
})

-- TAB MISC (in Settings Section)
local TabMisc = SectionSettings:Tab({
    Title = "Misc",
    Icon = "settings"
})

TabMisc:Paragraph({
    Title = "Miscellaneous Settings",
    Desc = "Additional features and settings",
    Locked = false
})

-- Auto Buy Logic
task.spawn(function()
    while task.wait(0.5) do
        -- Auto Buy Selected Seeds
        if AutoBuySelectSeed and type(SelectedSeeds) == "table" and #SelectedSeeds > 0 then
            for _, seed in ipairs(SelectedSeeds) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("BuyItem"):FireServer(seed .. " Seed", true)
                end)
                task.wait(0.1)
            end
        end
        
        -- Auto Buy All Seeds
        if AutoBuyAllSeeds then
            local allSeeds = {
                "Cactus", "Strawberry", "Pumpkin", "Dragon Fruit", "Eggplant",
                "Watermelon", "Cocotank", "Grape", "Carnivorous Plant",
                "Mr carrot", "Shroombino", "Tomatrio", "Mango"
            }
            for _, seed in ipairs(allSeeds) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("BuyItem"):FireServer(seed .. " Seed", true)
                end)
                task.wait(0.1)
            end
        end
        
        -- Auto Buy Selected Gears
        if AutoBuySelectGear and type(SelectedGears) == "table" and #SelectedGears > 0 then
            for _, gear in ipairs(SelectedGears) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("BuyGear"):FireServer(gear, true)
                end)
                task.wait(0.1)
            end
        end
        
        -- Auto Buy All Gears
        if AutoBuyAllGear then
            local allGears = {
                "Frost Grenade", "Frost Blower", "Banana Gun",
                "Carrot Launcher", "Water Bucket"
            }
            for _, gear in ipairs(allGears) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("BuyGear"):FireServer(gear, true)
                end)
                task.wait(0.1)
            end
        end
    end
end)

-- Auto Farm Logic with Bat Auto Clicker
task.spawn(function()
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Enhanced Bat Management
    local rebirthBatList = {
        "Basic Bat",
        "Leather Grip Bat",
        "Iron Plate Bat",
        "Iron Core Bat",
        "Aluminum Bat"
    }
    
    local currentEquippedBat = nil
    
    local function getBestBat()
        local backpack = player:FindFirstChild("Backpack")
        
        if not character or not backpack then return nil end
        
        for i = #rebirthBatList, 1, -1 do
            local bat = character:FindFirstChild(rebirthBatList[i]) or backpack:FindFirstChild(rebirthBatList[i])
            if bat then return bat end
        end
        
        return nil
    end
    
    local function autoEquipBestBat()
        local backpack = player:FindFirstChild("Backpack")
        
        if not character or not backpack then return false end
        
        if not humanoid then return false end
        
        -- Check if best bat is already equipped
        for i = #rebirthBatList, 1, -1 do
            local bat = character:FindFirstChild(rebirthBatList[i])
            if bat then
                currentEquippedBat = bat
                return true
            end
        end
        
        -- Equip best bat from backpack
        for i = #rebirthBatList, 1, -1 do
            local bat = backpack:FindFirstChild(rebirthBatList[i])
            if bat then
                task.spawn(function()
                    pcall(function()
                        humanoid:EquipTool(bat)
                        currentEquippedBat = bat
                    end)
                end)
                task.wait(0.08)
                return true
            end
        end
        
        return false
    end
    
    -- Optimized attack system
    local attackQueue = {}
    local isAttacking = false
    local ATTACK_INTERVAL = 0.04
    
    task.spawn(function()
        local attackRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("AttacksServer"):WaitForChild("WeaponAttack")
        
        while true do
            task.wait(ATTACK_INTERVAL)
            
            if #attackQueue > 0 and not isAttacking and AutoFarmEnabled then
                isAttacking = true
                
                local targetName = table.remove(attackQueue, 1)
                
                task.spawn(function()
                    pcall(function()
                        local bat = currentEquippedBat or getBestBat()
                        if bat and bat.Parent == character then
                            bat:Activate()
                        end
                        
                        attackRemote:FireServer({targetName})
                    end)
                end)
                
                isAttacking = false
            elseif not AutoFarmEnabled then
                attackQueue = {}
            end
        end
    end)
    
    -- Auto equip best bat loop
    task.spawn(function()
        while true do
            if AutoFarmEnabled then
                autoEquipBestBat()
            end
            task.wait(2)
        end
    end)
    
    local plotsFolder = Workspace:WaitForChild("Plots")
    local myPlot
    for _, plot in ipairs(plotsFolder:GetChildren()) do
        if plot:GetAttribute("Owner") == player.Name then
            myPlot = plot
            break
        end
    end
    if not myPlot then return end
    
    local tierModel
    local highestTier = 0
    if myPlot:FindFirstChild("Other") then
        for _, candidate in ipairs(myPlot.Other:GetChildren()) do
            local tierNum = candidate.Name:match("^Tier(%d+)$")
            if tierNum then
                tierNum = tonumber(tierNum)
                if tierNum > highestTier and candidate:IsA("Model") then
                    highestTier = tierNum
                    tierModel = candidate
                end
            end
        end
    end
    if not tierModel then return end
    
    local roadModel = tierModel:FindFirstChild("Road")
    if not roadModel then return end
    local roadParts = {}
    for _, p in ipairs(roadModel:GetDescendants()) do
        if p:IsA("BasePart") then table.insert(roadParts, p) end
    end
    
    local Clip = true
    local NoclipConnection
    local floatName = "HumanoidRootPart"
    
    local function noclip()
        Clip = false
        NoclipConnection = RunService.Stepped:Connect(function()
            if not Clip and character then
                for _, v in pairs(character:GetDescendants()) do
                    if v:IsA("BasePart") and v.CanCollide and v.Name ~= floatName then
                        v.CanCollide = false
                    end
                end
            end
        end)
    end
    
    local function clip()
        Clip = true
        if NoclipConnection then
            NoclipConnection:Disconnect()
            NoclipConnection = nil
        end
    end
    
    local function findFrostGrenade()
        for _, container in ipairs({character, player:WaitForChild("Backpack")}) do
            for _, item in ipairs(container:GetChildren()) do
                if item:IsA("Tool") and string.match(item.Name, "^%[x%d+%] Frost Grenade$") then
                    return item
                end
            end
        end
        return nil
    end
    
    local function fireFrostGrenade(brainrot)
        if not brainrot or not brainrot.Parent then return end
        local progress = brainrot:GetAttribute("Progress") or 0
        if progress > 0.6 then
            local tool = findFrostGrenade()
            if tool then
                local bp = brainrot.PrimaryPart or brainrot:FindFirstChildWhichIsA("BasePart")
                if bp then
                    humanoid:EquipTool(tool)
                    local useItemRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("UseItem")
                    local args = {{
                        Toggle = true,
                        Tool = tool,
                        Time = 0.5,
                        Pos = Vector3.new(bp.Position.X, bp.Position.Y, bp.Position.Z)
                    }}
                    useItemRemote:FireServer(unpack(args))
                end
            end
        end
    end
    
    local brainrotsFolder = Workspace:WaitForChild("ScriptedMap"):WaitForChild("Brainrots")
    local DETECT_RADIUS = 20
    local FIRE_INTERVAL = 2
    
    local function findTargetBrainrot(selectedRarities)
        for _, b in ipairs(brainrotsFolder:GetChildren()) do
            if b:IsA("Model") then
                local rarity = b:GetAttribute("Rarity")
                if rarity and table.find(selectedRarities, rarity) then
                    local primary = b.PrimaryPart or b:FindFirstChildWhichIsA("BasePart")
                    if primary then
                        for _, roadPart in ipairs(roadParts) do
                            if (primary.Position - roadPart.Position).Magnitude <= DETECT_RADIUS then
                                return b
                            end
                        end
                    end
                end
            end
        end
        return nil
    end
    
    while true do
        if AutoFarmEnabled then
            local targetBrainrot = findTargetBrainrot(SelectedRarities)
            if targetBrainrot then
                local targetPart = targetBrainrot.PrimaryPart or targetBrainrot:FindFirstChildWhichIsA("BasePart")
                if targetPart then
                    noclip()
                    hrp.CFrame = CFrame.new(targetPart.Position)
                    local bodyPos = Instance.new("BodyPosition")
                    bodyPos.MaxForce = Vector3.new(1e5, 1e5, 1e5)
                    bodyPos.P = 5000
                    bodyPos.D = 100
                    bodyPos.Position = hrp.Position
                    bodyPos.Parent = hrp
                    local lastFire = 0
                    while targetBrainrot.Parent and AutoFarmEnabled do
                        bodyPos.Position = targetPart.Position
                        local progress = targetBrainrot:GetAttribute("Progress") or 0
                        if progress > 0.6 then
                            local tool = findFrostGrenade()
                            if tool then
                                humanoid:EquipTool(tool)
                            end
                        end
                        local now = tick()
                        if now - lastFire >= FIRE_INTERVAL then
                            fireFrostGrenade(targetBrainrot)
                            lastFire = now
                        end
                        
                        -- Add brainrot to attack queue for optimized bat attacks
                        if targetBrainrot.Name then
                            table.insert(attackQueue, targetBrainrot.Name)
                        end
                        
                        task.wait(0.03)
                    end
                    humanoid:UnequipTools()
                    bodyPos:Destroy()
                    clip()
                end
            else
                task.wait(1)
            end
        else
            task.wait(1)
        end
    end
end)

-- Auto Farm Money Logic
task.spawn(function()
    while true do
        if AutoFarmMoneyEnabled then
            pcall(function()
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("EquipBestBrainrots"):FireServer()
                print("✓ Equipped best brainrots for farming!")
            end)
            task.wait(10) -- Wait 10 seconds before next equip
        else
            task.wait(1)
        end
    end
end)